---
description: System design practice
globs: ["**/*.md"]
---

# System Design Practice

Two practice tracks exist in this repo:

## Full Exercises

Live in `exercises/NNN/` with two files:
- `problem.md` — requirements and constraints
- `design.md` — architecture, tradeoffs, failure modes, review feedback

Evaluation uses `rubric.md` at repo root.

## Micro-Designs

Live in `micro/NNN/` with three files:
- `problem.md` — focused requirements (3-4 FRs, 3-4 NFRs, 2-3 constraints), concept hints
- `context.md` — 2 guided research prompts and questions asked during design
- `design.md` — phased design (40 min total) with decision scaffolds and review feedback

Evaluation uses `micro-rubric.md` at repo root.

### Micro-Design Time Budget (40 min total)

| Phase | Time |
|-------|------|
| Research | 5 min |
| Framing | 5 min |
| Sub-systems | 5 min |
| Key decisions | 15 min |
| Stress test | 5 min |
| Buffer | 5 min |

### Micro-Design Principles

- Problems are scope-reduced but architecturally complex. Fewer requirements, same depth of tradeoffs.
- The 40 minutes includes everything: research, design, and buffer. No separate clock.
- Research phase: answer 2 guided research prompts in `context.md` via self-research. This builds vocabulary for Phase 3 decisions.
- Phase 2 (sub-systems) is strictly listing: name 3-5 sub-systems, one sentence each. If you're writing more than 5 lines, you're over-designing.
- Phase 3 provides 2-3 architectural decisions with named options. Your job: pick, justify by referencing constraints/NFRs, and describe the mechanics.
- Justifications must reference specific constraints or NFRs. "Simplest" or "safest" without explaining why simplicity matters here is not a justification.
- If stuck on any phase beyond its time box, write what you know, mark it incomplete, and move on.
- Research must translate to decisions. Concepts studied in `context.md` but absent from Phase 3 choices is a specific anti-pattern the grading will call out.

### Progression Path

1. **Guided micro** (current) — reduced scope, decision scaffolds with options, 40 min
2. **Standard micro** — full scope, open-ended deep dive, concept hints, 50 min
3. **Full exercises** — no scaffolding, no time box
4. **Timed full exercises** — no scaffolding, 35-40 min (interview-realistic)

Transition signal from guided to standard: consistently picking the right options AND explaining the mechanics correctly.

## Reference

`concepts.md` at repo root is a concept reference organized by category. Consult it during any exercise. The `/micro` command draws concept hints from it.

## Commands

### /micro
1. Find next number in `micro/`
2. Create `micro/NNN/problem.md` with focused requirements and 2 concept hints
3. Create `micro/NNN/context.md` with 2 guided research prompts
4. Create `micro/NNN/design.md` with 4-phase template including 2-3 decision scaffolds
5. Display problem inline

### /new
1. Find next number in `exercises/`
2. Create `exercises/NNN/problem.md` with requirements
3. Create empty `exercises/NNN/design.md`
4. Display problem inline

### /grade
1. Detect whether current exercise is in `exercises/` or `micro/`
2. Read `problem.md` and `design.md` (and `context.md` for micro-designs)
3. Score against `rubric.md` or `micro-rubric.md` accordingly
4. Append review to `design.md`
5. For micro-designs: include phase-by-phase feedback, decision analysis, and research assessment

### /review
1. Scan `design.md` files in both `exercises/` and `micro/` for `## Review` sections
2. Report patterns across all exercises, with separate tracking per track
3. Track decision accuracy and framing accuracy as primary metrics for micro-designs

## Problem Generation

### Full exercises
Include: context, functional requirements, non-functional requirements (with numbers), constraints.
Do not include: solutions, architecture hints, tradeoffs.

### Micro-designs
Include: context, 3-4 functional requirements, 3-4 NFRs, 2-3 constraints, 2 concept hints, 2-3 decision scaffolds in the design template.
Do not include: solutions or tradeoffs in the problem. Decision scaffolds provide options but not rationale.

Categories: data systems, real-time systems, transactional systems, platform services, content systems.
